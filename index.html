<!--suppress JSUnusedGlobalSymbols -->
<html lang="en">
  <body style="margin: 0; overflow-y: hidden; overflow-x: hidden">
    <canvas id="my_canvas" style="width: 100vw; height: 100vh"></canvas>
    <script>
      let canvas = document.getElementById('my_canvas')
      let gl = canvas.getContext('webgl')
      let imports = {
        env: {
          js_clear_screen_to_color: function (r, g, b, a) {
            gl.clearColor(r, g, b, a)
            gl.clear(gl.COLOR_BUFFER_BIT)
          },
        },
      }
      WebAssembly.instantiateStreaming(
        fetch('target/wasm32-unknown-unknown/debug/examples/game.wasm'),
        imports
      ).then(function (result) {
        result.instance.exports.main()

        document.onkeydown = (event) => {
          let code = 0
          switch (event.code) {
            case "ArrowLeft":
              code = 1;
              break;
            case "ArrowRight":
              code = 2;
              break;
            case "ArrowUp":
              code = 3;
              break;
            case "ArrowDown":
              code = 4;
              break;
            case "Space":
              code = 5;
              break;
          }

          result.instance.exports.key_pressed(code)
        }
      })
    </script>
  </body>
</html>
